# スクラップ単語帳 ルール定義

このディレクトリは、Claude Codeセッション中に出会った新しい概念・用語を記録し、
スペースドリピティション的に復習するための単語帳システムです。

---

## ファイル構成

```
Scraps/
├── CLAUDE.md          ← このファイル（ルール定義）
├── _template.md       ← 新規カテゴリファイルのテンプレート
├── _archive.md        ← 理解度▪︎▪︎▪︎▪︎になったスクラップの保管庫
├── SQL.md             ← カテゴリ別ファイル（例）
└── TypeScript.md      ← カテゴリ別ファイル（例）
```

- **1セッション = 1スクラップ**を原則とする
- **カテゴリ別にファイルを作成**し、各スクラップはそのファイル内の `##` 見出しで管理する
- カテゴリが存在しない場合は新規ファイルを作成する

---

## スクラップのフォーマット

各カテゴリファイル内のスクラップは以下の形式で記述する:

```markdown
## {トピック名}

| 項目 | 値 |
|------|----|
| 理解度 | ▪︎◻︎◻︎◻︎ |
| 保存日 | YYYY-MM-DD |
| 最終復習 | YYYY-MM-DD |
| 次回復習 | YYYY-MM-DD |

**Q:** {質問文}

**A:** {回答}

**メモ:** {補足・背景・使用例など（省略可）}
```

---

## 理解度レベルと復習スケジュール

| インジケーター | 意味 | 次回復習まで |
|----------------|------|-------------|
| ▪︎◻︎◻︎◻︎ | 保存したばかり。まだ復習していない | 1日後 |
| ▪︎▪︎◻︎◻︎ | 質問に対して概要を言えた | 3日後 |
| ▪︎▪︎▪︎◻︎ | 自分の言葉で説明でき、腑に落ちている | 7日後 |
| ▪︎▪︎▪︎▪︎ | 完全に定着 → `_archive.md` へ移動 | 出題しない |

理解度を更新したとき、**更新後のレベルに対応する日数**で次回復習日を設定する。

---

## Claudeへの指示（操作方法）

### セッション開始時

このディレクトリ（`Scraps/`）でセッションを開始したとき、**最初の返答で必ずダッシュボードを表示する**:

```
📋 YYYY-MM-DD のスクラップ状況
本日の復習対象: N件（うち持ち越し M件）
```

- 持ち越し = 次回復習日 < 本日（過去日付）のもの
- その後ユーザーの入力を待つ。質問・作業の依頼があればそちらを優先し、「復習」などの短い入力なら復習モードへ移行する

### スクラップを保存する

ユーザーが「スクラップに保存して」「これを残して」などと言ったとき:

1. カテゴリを判断（不明な場合はユーザーに確認）
2. セッション内の会話を振り返り、以下の内容を自動生成してユーザーに提示する:
   - `## {トピック名}`（見出し）
   - **Q:** そのトピックの核心を問う1文
   - **A:** 回答の要点（簡潔に）
   - **メモ:** 補足・背景・使用例（あれば）
3. 内容を提示した後、以下の質問を投げかける:

   > 「{カテゴリ名} にこの内容で保存するなら理解度を1〜4で回答してください。」
   > ```
   > 1: ▪︎◻︎◻︎◻︎ 保存したばかり
   > 2: ▪︎▪︎◻︎◻︎ 概要は言える
   > 3: ▪︎▪︎▪︎◻︎ 自分の言葉で説明できる
   > 4: ▪︎▪︎▪︎▪︎ 完全に定着（即アーカイブ）
   > ```

4. ユーザーの回答を確認する:
   - **1〜4 が返ってきた場合**: 対応する理解度でファイルに保存する
   - **それ以外が返ってきた場合**: 修正内容を反映して同じ質問を再度投げかける（1〜4が返るまで繰り返す）
5. 保存日・最終復習日は本日の日付、次回復習日は選択した理解度に対応する日数で設定する（理解度4の場合は即 `_archive.md` へ移動）

### 復習する

ユーザーが「復習して」「今日の復習」などと言ったとき:

1. `Scraps/` 内の全カテゴリファイルを読み込む（`CLAUDE.md` / `_template.md` / `_archive.md` は除外）
2. **次回復習日 ≤ 本日** のスクラップを抽出する（期日超過分も含む）
3. 抽出件数を確認する:
   - **0件**: 「今日の復習対象はありません」と返して終了する
   - **1〜3件**: そのまま全件出題する
   - **4件以上**: 期日が来ている中からランダムに3件を選んで出題する。残りは次回復習日を翌日に更新して持ち越しとし、「{n}件を明日に持ち越しました」と通知する

> **自動繰り越しについて**: 次回復習日が過去になったスクラップは `次回復習日 ≤ 本日` の条件で自然に抽出されるため、当日未復習のまま終わっても翌日以降に自動で繰り越される。特別な操作は不要。
4. **1問ずつ**以下のサイクルで進める（3問まとめて出さない）:

   ```
   Claude: 「Q1. {質問文}」
      ↓
   ユーザー: 回答
      ↓
   Claude: 「正解は〜 / あなたの回答は〜」とフィードバック
          「理解度を教えてください（▪︎◻︎◻︎◻︎ / ▪︎▪︎◻︎◻︎ / ▪︎▪︎▪︎◻︎ / ▪︎▪︎▪︎▪︎）」
      ↓
   ユーザー: 理解度を申告
      ↓
   Claude: ファイルを更新して次の問いへ（▪︎▪︎▪︎▪︎ならアーカイブ移動）
   ```

5. 全問終了後、本日の復習サマリーを表示する:

   ```
   3問完了。明日の予定: 5件（うち持ち越し 2件）
   ```

   - 持ち越し = 今回選ばれなかった本日期日分（次回復習日を翌日に更新済みのもの）

### 理解度を更新する

- 理解度の判断は**ユーザー自身が行う**（Claudeは提案しない）
- 更新時に書き換える項目:
  - 理解度インジケーター
  - 最終復習日 → 本日の日付
  - 次回復習日 → 更新後のレベルに対応する日数を本日に加算

| 更新後レベル | 次回復習日 |
|-------------|-----------|
| ▪︎◻︎◻︎◻︎ | 本日 + 1日 |
| ▪︎▪︎◻︎◻︎ | 本日 + 3日 |
| ▪︎▪︎▪︎◻︎ | 本日 + 7日 |
| ▪︎▪︎▪︎▪︎ | アーカイブへ移動（次回復習日は設定しない） |

- ユーザーが `▪︎▪︎▪︎▪︎` と申告した場合:
  1. そのスクラップ（`##` 見出しからその次の `##` 見出しの直前まで）を `_archive.md` の末尾に移動する
  2. 元のカテゴリファイルから該当スクラップを削除する
  3. 以降の復習には出題しない

---

## 注意事項

- 1セッションで複数のスクラップを保存する場合は、それぞれ別の `##` 見出しで追加する
- カテゴリ名はなるべく簡潔に（例: `SQL`, `TypeScript`, `HTTP`, `Git`, `設計`）
- メモ欄は省略可だが、当時の文脈や使用例があると復習時に役立つ
